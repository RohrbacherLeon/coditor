{% extends "layouts/master.twig" %}

{% block assets %}
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/js/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="/js/codemirror/theme/ambiance.css">
    <script src="/js/codemirror/lib/codemirror.js"></script>
    <script src="/js/codemirror/mode/javascript/javascript.js"></script>
{% endblock %}

{% block content %}
        
<div class="exercise">
    <form class="exercise__top" method='post'>
        <div class="exercise__top__subject">
            <h1>{{ exercise.title }}</h1>
            <div class="description">
                {{exercise.description}}
            </div>
            <p class="author">{{exercise.author}} </p>
        </div>
        <textarea name="function" id="js-textarea" cols="30" rows="10"></textarea>
    </div>
    <div class="exercise__bottom">
        <ul class="feedback">
            {% for success in results.success %}
                <li class='success'>{{success.title}}</li>
            {% endfor %}
            {% for fail in results.fails %}
                <li class='fail'>{{fail.title}} {{fail.error.operator}} {{fail.error.actual}}</li>
            {% endfor %}
        </ul>
        <button type='submit' class="button button--green">Valider le code</button>
    </form>
</div>
{% endblock %}

        

{% block scripts %}
        
    <script>
        let editor = CodeMirror.fromTextArea(document.getElementById('js-textarea'), {
            lineNumbers: true,
            mode:  "javascript",
            theme: 'ambiance'
        });
    </script>



    <script>
            $('#js-dropdown-head').click(function(){
            $('#js-dropdown').toggleClass('open')
        })
    </script>
{% endblock %}
